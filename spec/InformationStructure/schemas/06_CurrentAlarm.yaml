affected-management-plane-transport:
  type: array
  x-key: _affected-management-plane-transport
  description: > 
    'List of ForwardingConstructs that have problems
    All references (_affected-management-plane-transport, _affected-cc, _affected-ltp) relate to objects in RunningDS'
  items:
    type: object
    required:
      - _affected-management-plane-transport
      - affected-link
    properties:
      _affected-management-plane-transport:
        type: string
        description: 'Reference towards a ForwardingConstruct with problems (value must be unique and invariant)'
      affected-link:
        type: array
        x-key: _affected-link
        minItems: 1
        description: >
          'List of Links that have problems
          As the ForwardingConstruct with problems is exclusively composed from Links, at least one Link must have a problem'
        items:
          type: object
          required:
            - _affected-link
            - affected-cc
          properties:
            _affected-link:
              type: string
              description: 'Reference towards a Link with problems (value must be unique and invariant)'
            affected-cc:
              type: array
              x-key: _affected-cc
              minItems: 1
              description: >
                'List of ControlConstructs that have problems
                As problems of a Link are always associated with one of its termination points, at least one ControlConstruct must have a problem'
              items:
                type: object
                minProperties: 2
                required:
                  - _affected-cc
                properties:
                  _affected-cc:
                    type: string
                    description: 'Reference towards a ControlConstruct that has problems (value must be unique and invariant)'
                  error:
                    type: array
                    x-key: _error-code
                    minItems: 1
                    description: 'error attribute exclusively occurs, if there is at least one error directly associated with the ControlConstruct'
                    items:
                      $ref: "#/components/schemas/errorDescription"
                  affected-ltp:
                    type: array
                    x-key: _affected-ltp
                    minItems: 1
                    description: >
                      'List of LogicalTerminationPoints that have problems
                      affected-ltp attribute exclusively occurs, if there is at least one LTP affected by an error'
                    items:
                      type: object
                      minProperties: 2
                      required:
                        - _affected-ltp
                      properties:
                        _affected-ltp:
                          type: string
                          description: 'Reference towards a LogicalTerminationPoint that has problems (value must be unique and invariant)'
                        error:
                          type: array
                          x-key: _error-code
                          minItems: 1
                          description: 'error attribute exclusively occurs, if there is at least one error directly associated with the LogicalTerminationPoint'
                          items:
                            $ref: "#/components/schemas/errorDescription"
                        affected-lp:
                          type: array
                          x-key: _affected-lp
                          minItems: 1
                          description: >
                            'List of LayerProtocols that have problems
                            affected-lp attribute exclusively occurs, if there is at least one LP affected by an error'
                          items:
                            type: object
                            required:
                              - _affected-lp
                              - error
                            properties:
                              _affected-lp:
                                type: string
                                description: 'Reference towards a LayerProtocol that has problems (value must be unique and invariant)'
                              error:
                                type: array
                                x-key: _error-code
                                minItems: 1
                                description: 'Error associated with the LayerProtocol'
                                items:
                                  $ref: "#/components/schemas/errorDescription"
components:
  schemas:
    errorDescription:
      type: object
      required:
        - _error-code
        - date-of-creation
        - past-attempts-to-fix
        - date-of-next-attempt-to-fix
      properties:
        _error-code:
          type: integer
          description: 'Reference towards a definition of an error-code (value must be unique and invariant)'
        date-of-creation:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[\+\-]\d{2}:\d{2})$'
          description: 'Date and time when this problem has been detected'
        past-attempts-to-fix:
          type: array
          x-key: date-of-attempt
          description: 'List of past attempts to fix the problem'
          items:
            type: object
            required:
              - date-of-attempt
              - response-code
            properties:
              date-of-attempt:
                type: string
                pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[\+\-]\d{2}:\d{2})$'
                description: 'Date and time when it was attempted to fix the problem'
              response-code:
                type: integer
                description: 'Code that resulted from the attempt to fix the problem'
        date-of-next-attempt-to-fix:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[\+\-]\d{2}:\d{2})$'
          description: 'Next attempt to fix this problem shall not be made before this date'
